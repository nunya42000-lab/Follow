@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

/* ---------------------------------- */
/* --- GLOBAL BEHAVIOR --- */
/* ---------------------------------- */
:root {
    /* Base defaults to avoid flash */
    --bg-main: #1f2937;
    --text-main: #ffffff;
}

body {
    background-color: var(--bg-main);
    color: var(--text-main);
    transition: background-color 0.3s, color 0.3s;
    min-height: 100vh;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);

    /* --- GLOBAL LOCK (Fixes stuck buttons & accidental highlights) --- */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    touch-action: manipulation;
}

/* EXCEPTION: Allow typing/copying in inputs */
input, textarea, .selectable-text {
    -webkit-user-select: text !important;
    user-select: text !important;
    -webkit-touch-callout: default !important;
    cursor: auto;
    touch-action: auto;
}

/* Helper Classes for JS Theme Switching */
.settings-modal-bg { background-color: var(--bg-modal) !important; color: var(--text-main) !important; }
.settings-input { background-color: var(--bg-input) !important; color: var(--text-main) !important; border-color: var(--border) !important; }
.text-muted-custom { color: var(--text-muted) !important; }
.border-custom { border-color: var(--border) !important; }
.bg-primary-app { background-color: var(--primary) !important; }
.hover\:bg-secondary-app:hover { background-color: var(--primary-hover) !important; }

/* ---------------------------------- */
/* --- BLACKOUT LAYER --- */
/* ---------------------------------- */
#blackout-layer {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: #000000; z-index: 9999; cursor: none; touch-action: none;
    display: none;
}
body.blackout-active #blackout-layer { display: block; }

/* ---------------------------------- */
/* --- UI COMPONENTS --- */
/* ---------------------------------- */
.tab-btn {
    padding: 10px; flex: 1; text-align: center; font-weight: bold; font-size: 0.9rem;
    border-bottom: 2px solid transparent; opacity: 0.6; cursor: pointer;
    transition: all 0.2s;
}
.tab-btn:hover { opacity: 0.8; }
.tab-btn.active {
    border-bottom-color: var(--primary); opacity: 1.0; color: var(--primary);
}
.tab-content { display: none; }
.tab-content.active { display: block; }

#app { padding-top: 4rem; }
#sequence-container { justify-content: flex-start !important; padding-top: 2rem; }

#input-footer {
    background-color: var(--bg-modal);
    border-top: 4px solid var(--primary);
    padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
}

.btn-input {
    transition: all 0.15s ease-in-out;
    position: relative; font-weight: 700;
    border-radius: 9999px; 
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2); 
    height: 64px; color: var(--text-main);
    
    /* Double check safety for buttons */
    -webkit-user-select: none;
    user-select: none;
}
.btn-pad-number {
    background-color: var(--card-bg);
    font-size: 1.5rem;
}
.btn-pad-number:active { transform: scale(0.95); }

/* Flash Effects */
.btn-pad-number.key9-flash {
    background-color: #3b82f6; 
    box-shadow: 0 0 15px 5px rgba(59, 130, 246, 0.7); 
    transform: scale(1.05); 
}
.btn-pad-number.key12-flash {
    background-color: #10b981; 
    box-shadow: 0 0 15px 5px rgba(16, 185, 129, 0.7); 
    transform: scale(1.05); 
}

.btn-control {
    font-size: 1.8rem; height: 64px; border-radius: 9999px;
    background-color: var(--btn-control-bg); color: var(--text-main);
}
.btn-control:active { transform: scale(0.95); opacity: 0.9; }

.number-box {
    height: 40px; line-height: 40px; font-size: 1.1rem; font-weight: 700;
    transition: height 0.2s, line-height 0.2s, font-size 0.2s;
    background-color: var(--primary); color: white;
}

/* Piano Keys omitted for brevity, logic remains the same */
.prompt-box {
    width: 100%; padding: 0.75rem; border-radius: 0.5rem;
    font-family: monospace; font-size: 0.875rem; resize: none;
}
