@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

:root {
    --bg-main: #000000;
    --card-bg: #121212;
    --seq-bubble: #4f46e5;
    --btn-bg: #1a1a1a;
    --text-main: #e5e5e5;
    --border: rgba(255,255,255,0.15);
}

body {
    background-color: var(--bg-main);
    color: var(--text-main);
    transition: background-color .3s, color .3s;
    min-height: 100vh;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    touch-action: manipulation;
}

/* Text Selection override for specific elements */
input, textarea, .selectable-text {
    -webkit-user-select: text !important;
    user-select: text !important;
    -webkit-touch-callout: default !important;
    cursor: auto;
    touch-action: auto;
}

/* Settings & Modal Styles */
.settings-modal-bg { background-color: var(--card-bg) !important; color: var(--text-main) !important; border: 1px solid var(--border); }
.settings-input { background-color: var(--bg-main) !important; color: var(--text-main) !important; border: 1px solid var(--border) !important; }
.bg-primary-app { background-color: var(--seq-bubble) !important; color: var(--text-main); }
.text-primary-app { color: var(--seq-bubble) !important; }

/* Grid & Sequence Styles */
#sequence-container { width: 100%; max-width: 80rem; margin: 0 auto; padding-bottom: 8rem; } /* Added padding for scrolling */
.number-box { background-color: var(--btn-bg); color: var(--text-main); border: 1px solid var(--border); transition: all 0.15s ease-out; }
.flash-active { background-color: var(--seq-bubble) !important; color: #fff !important; transform: scale(1.1); box-shadow: 0 0 15px var(--seq-bubble); border-color: transparent; }

/* Input Footer */
#input-footer { background-color: var(--card-bg); border-top: 1px solid var(--border); padding-bottom: env(safe-area-inset-bottom); z-index: 50; }
.btn-input { background-color: var(--btn-bg); color: var(--text-main); border: 1px solid var(--border); border-radius: 0.75rem; font-weight: bold; transition: all 0.1s; display: flex; align-items: center; justify-content: center; user-select: none; }
.btn-input:active { transform: scale(0.95); opacity: 0.8; }

/* Piano Keys */
.piano-key-white { background-color: #e5e5e5; color: #000; height: 5rem; border: 1px solid #ccc; border-bottom: 4px solid #999; }
.piano-key-white:active { border-bottom-width: 1px; transform: translateY(3px); background-color: #d1d1d1; }
.piano-key-black { background-color: #1a1a1a; color: #fff; height: 3.5rem; z-index: 10; margin-left: -0.75rem; margin-right: -0.75rem; border: 1px solid #000; border-bottom: 4px solid #000; width: 2rem; position: relative; }
.piano-key-black:active { border-bottom-width: 1px; transform: translateY(3px); background-color: #333; }

/* --- HEADER BAR STYLES (UPDATED) --- */
#aux-control-header {
    /* STICKY: Sits in flow, pushes content down */
    position: sticky !important; 
    top: 0;
    z-index: 40;
    
    /* Solid background to cover content scrolling behind */
    background-color: var(--bg-main) !important;
    border-bottom: 1px solid var(--border);
    
    /* Layout */
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.75rem 1rem;
    width: 100%;
    
    /* Ensure it takes up space */
    min-height: 4.5rem;
    pointer-events: auto !important;
}

/* Ensure the inner containers center the buttons perfectly */
#aux-control-header > div {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: auto !important;
    max-width: 100%;
}

/* Target the specific button wrapper inside the header */
#aux-control-header > div > div {
    display: flex;
    gap: 1rem !important; /* Nice consistent spacing */
    justify-content: center;
}

/* Force specific size for header buttons */
#aux-control-header button {
    width: 3.5rem !important;
    height: 3.5rem !important;
    font-size: 1rem;
    flex-shrink: 0;
    border: 1px solid var(--border);
    background-color: var(--btn-bg);
}

/* Hide header when needed */
#aux-control-header.hidden {
    display: none !important;
}

/* Blackout Mode */
#blackout-layer {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: #000; z-index: 9999; cursor: none; touch-action: none;
    display: none;
}
body.blackout-active #blackout-layer { display: block; }
body.hide-controls .control-row { display: none !important; }
